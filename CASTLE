game.StarterGui:SetCore("SendNotification", {
    Title = "Pháo đài trên biển";
    Text = "Đang trên đường tới...";
    Duration = 5;
})
game.StarterGui:SetCore("SendNotification", {
    Title = "Castle on the sea";
    Text = "On the way...";
    Duration = 5;
})

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Tùy chỉnh tọa độ tại đây
local teleportPosition = Vector3.new(-5073.83, 350, -3152.52) -- Tọa độ teleport
local lungeTargetPosition = Vector3.new(-4916.79, 317.45, -3051.62) -- Tọa độ lướt

-- Tốc độ lướt
local lungeSpeed = 300 -- Tốc độ lướt (cao = nhanh)

-- Hàm tính khoảng cách
local function calculateDistance(pos1, pos2)
    return (pos1 - pos2).Magnitude
end

-- Teleport đến vị trí đầu tiên
local function teleportToPosition(position)
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    humanoidRootPart.CFrame = CFrame.new(position)
end

-- Lướt đến vị trí thứ hai
local function performLunge(targetPosition)
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    local startPosition = humanoidRootPart.Position
    local direction = (targetPosition - startPosition).Unit -- Hướng lướt
    local distance = (targetPosition - startPosition).Magnitude -- Khoảng cách đến mục tiêu
    local startTime = tick()

    -- Lướt cho đến khi đạt đến tọa độ mục tiêu
    while (tick() - startTime < distance / lungeSpeed) do
        humanoidRootPart.CFrame = humanoidRootPart.CFrame + direction * (lungeSpeed * RunService.Heartbeat:Wait())
    end
end

-- Logic chính
local function executeMovement()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
    local currentPosition = humanoidRootPart.Position

    -- Tính khoảng cách từ nhân vật đến hai tọa độ
    local distanceToTeleport = calculateDistance(currentPosition, teleportPosition)
    local distanceToLunge = calculateDistance(currentPosition, lungeTargetPosition)

    -- So sánh khoảng cách và thực hiện hành động
    if distanceToLunge < distanceToTeleport then
        -- Lướt (bỏ qua teleport)
        performLunge(lungeTargetPosition)
    else
        -- Teleport trước, sau đó lướt
        teleportToPosition(teleportPosition)
        task.wait(0.3) -- Đợi một chút trước khi lướt
        performLunge(lungeTargetPosition)
    end
end

-- Chạy script
executeMovement()
